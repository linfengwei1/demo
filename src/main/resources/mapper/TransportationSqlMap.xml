<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.great.dao.TransportationDao">

	<select id="login" resultType="com.great.entity.Transportation" parameterType="java.util.Map">
		select * from transportation where account = #{account} and pwd = #{pwd}
	</select>


	<select id="getOneSubjectCount" resultType="java.lang.Integer" parameterType="java.util.Map">
		select count(*)
		from question1
		<where>
			<if test="question!=null">
				and  question like concat('%',#{question},'%')
			</if>
			<if test="type!=null">
				and type = #{type}
			</if>
		</where>
	</select>

	<select id="getOneSubject" resultType="com.great.entity.Subject" parameterType="java.util.Map">
		select *
		from question1
		<where>
			<if test="question!=null">
				and  question like concat('%',#{question},'%')
			</if>
			<if test="type!=null">
				and type = #{type}
			</if>
		</where>
		limit #{minlimit} , #{maxlimit}
	</select>

	<select id="getFourthSubjectCount" resultType="java.lang.Integer" parameterType="java.util.Map">
		select count(*)
		from question4
		<where>
			<if test="question!=null">
				and  question like concat('%',#{question},'%')
			</if>
			<if test="type!=null">
				and type = #{type}
			</if>
		</where>
	</select>

	<select id="getFourthSubject" resultType="com.great.entity.Subject" parameterType="java.util.Map">
		select *
		from question4
		<where>
			<if test="question!=null">
				and  question like concat('%',#{question},'%')
			</if>
			<if test="type!=null">
				and type = #{type}
			</if>
		</where>
		limit #{minlimit} , #{maxlimit}
	</select>

	<select id="getOneSubjectMsg" resultType="com.great.entity.Subject" parameterType="java.lang.Integer">
		select * from question1 where id=#{id}
	</select>

	<select id="getFourthSubjectMsg" resultType="com.great.entity.Subject" parameterType="java.lang.Integer">
		select * from question4 where id=#{id}
	</select>

	<delete id="deleteOneSubjectMsg" parameterType="java.lang.Integer">
		delete from question1 where id=#{id}
	</delete>

	<delete id="deleteFourthSubjectMsg" parameterType="java.lang.Integer">
		delete from question4 where id=#{id}
	</delete>

	<update id="updateOneSubjectMsg" parameterType="com.great.entity.Subject">

		update question1
		<set>
			<if test="question!=null">
				question=#{question}
			</if>
			<if test="answer!=null">
				,answer=#{answer}
			</if>
			<if test="item1!=null">
				,item1=#{item1}
			</if>
			<if test="item2!=null">
				,item2=#{item2}
			</if>
			<if test="item3!=null">
				,item3=#{item3}
			</if>
			<if test="item4!=null">
				,item4=#{item4}
			</if>
			<if test="type!=null">
				,type=#{type}
			</if>
			<if test="url!=null">
				,url=#{url}
			</if>
		</set>
		where id=#{id}

	</update>

	<update id="updateFourthSubjectMsg" parameterType="com.great.entity.Subject">
		update question4
		<set>
			<if test="question!=null">
				question=#{question}
			</if>
			<if test="answer!=null">
				,answer=#{answer}
			</if>
			<if test="item1!=null">
				,item1=#{item1}
			</if>
			<if test="item2!=null">
				,item2=#{item2}
			</if>
			<if test="item3!=null">
				,item3=#{item3}
			</if>
			<if test="item4!=null">
				,item4=#{item4}
			</if>
			<if test="type!=null">
				,type=#{type}
			</if>
			<if test="url!=null">
				,url=#{url}
			</if>
		</set>
		where id=#{id}
	</update>


	<select id="getStudentCount" resultType="java.lang.Integer" parameterType="java.util.Map" >
		select count(*)
		from student
		<where>
			<if test="name!=null">
				and  name like concat('%',#{name},'%')
			</if>
			<if test="state!=null">
				and student_state_id = #{state}
			</if>
		</where>
	</select>

	<select id="getStudentTbl" resultType="com.great.entity.Student" parameterType="java.util.Map">
		select *
		from student
		<where>
			<if test="name!=null">
				and  name like concat('%',#{name},'%')
			</if>
			<if test="state!=null">
				and student_state_id = #{state}
			</if>
		</where>
		limit #{minlimit} , #{maxlimit}
	</select>

</mapper>