<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.great.dao.IStudentDao">

	<resultMap id="studentMap" type="Student">
		<!-- 主键字段的对应 -->
		<id property="id" column="id"></id>
		<!--非主键字段的对应-->
		<result property="account" column="account"></result>
		<result property="name" column="name"></result>
		<result property="pwd" column="pwd"></result>
		<result property="sex" column="sex"></result>
		<result property="age" column="age"></result>
		<result property="idNumber" column="idnumber"></result>
		<result property="phone" column="phone"></result>
		<result property="student_state_id" column="student_state_id"></result>
		<result property="school_id" column="school_id"></result>
	</resultMap>


	<select id="login" resultType="com.great.entity.Student" parameterType="java.util.HashMap">
		select * from student where account = #{account} and pwd = #{pwd}
	</select>


<!--	<resultMap id="menuMap" type="TreeData">-->
<!--		<id property="id" column="id"></id>-->
<!--		<result property="title" column="name"></result>-->
<!--		<result property="href" column="url"></result>-->

<!--		&lt;!&ndash; 配置user对象中accounts集合的映射 &ndash;&gt;-->
<!--		<collection property="children" ofType="TreeData" column="{id=id,roleid=roleid}" select="getMenuChildren"/>-->
<!--	</resultMap>-->

<!--	<resultMap id="fileMap" type="File">-->
<!--		<id property="id" column="id"></id>-->
<!--		<result property="fileName" column="filename"></result>-->
<!--		<result property="uid" column="uid"></result>-->
<!--		<result property="uploadTime" column="uploadtime" jdbcType="TIMESTAMP"></result>-->
<!--		<result property="times" column="times"></result>-->
<!--		<result property="styleId" column="styleid"></result>-->
<!--		<result property="score" column="score"></result>-->
<!--		<result property="styleName" column="name"></result>-->
<!--		<result property="uname" column="uname"></result>-->
<!--	</resultMap>-->
<!--	<resultMap id="menuMap2" type="TreeData">-->
<!--		<id property="id" column="id"></id>-->
<!--		<result property="title" column="name"></result>-->
<!--		<result property="href" column="url"></result>-->

<!--		&lt;!&ndash; 配置user对象中accounts集合的映射 &ndash;&gt;-->
<!--		<collection property="children" ofType="TreeData" column="id" select="getAllMenuChildren"/>-->
<!--	</resultMap>-->
<!--&lt;!&ndash;找出根节点菜单&ndash;&gt;-->
<!--	<select id="findAllRecursion" resultMap="menuMap" parameterType="int">-->
<!--     	SELECT r.roleid,m.id,m.name,m.url-->
<!--        FROM-->
<!--            menu m,role_menu r-->
<!--        WHERE-->
<!--            m.pid =0 and r.menuid = m.id and r.roleid = #{roleid}-->
<!--    </select>-->
<!--&lt;!&ndash;递归查询子菜单&ndash;&gt;-->
<!--	<select id="getMenuChildren" resultMap="menuMap">-->
<!--      SELECT-->
<!--             r.roleid,m.id,m.name,m.url-->
<!--        FROM-->
<!--            menu m,role_menu r-->
<!--        WHERE-->
<!--            m.pid= #{id}  and r.roleid = #{roleid} and m.id in(select menuid from role_menu where roleid = #{roleid}) and m.id=r.menuid-->
<!--    </select>-->
<!--&lt;!&ndash;找出根节点菜单&ndash;&gt;-->
<!--	<select id="findAllMenu" resultMap="menuMap2" parameterType="int">-->
<!--     	SELECT m.id,m.name,m.url-->
<!--        FROM-->
<!--            menu m-->
<!--        WHERE-->
<!--            m.pid =0-->
<!--    </select>-->
<!--&lt;!&ndash;递归查询子菜单&ndash;&gt;-->
<!--	<select id="getAllMenuChildren" resultMap="menuMap2">-->
<!--      SELECT-->
<!--             m.id,m.name,m.url-->
<!--        FROM-->
<!--            menu m-->
<!--        WHERE-->
<!--            m.pid= #{id}-->
<!--    </select>-->

<!--    <delete id="delUser" parameterType="int">-->
<!--        delete from user-->
<!--        where uid = #{uid}-->
<!--    </delete>-->


<!--&lt;!&ndash;	<select id="findById"parameterType="java.lang.Integer" resultMap=""></select>&ndash;&gt;-->


<!--    <select id="findByUid" resultType="com.great.entity.User" parameterType="int">-->
<!--		select * from user where uid = #{uid}-->
<!--	</select>-->

<!--    <select id="findMenuByPid" resultType="com.great.entity.Menu" parameterType="int">-->
<!--		select * from menu where id in (select distinct  m.pid from menu m where m.id in (select id from role_menu where roleid = #{roleid}))-->
<!--	</select>-->
<!--	<select id="getMenuById" resultType="com.great.entity.Menu"  parameterType="java.util.HashMap">-->
<!--		select m.* from menu m,role_menu r where r.roleid=#{roleid} and r.menuid=m.id and m.pid=#{id}-->
<!--	</select>-->

<!--    <select id="login" resultType="com.great.entity.User" parameterType="java.util.HashMap">-->
<!--		select * from user where uname = #{uname} and pwd = #{pwd}-->
<!--	</select>-->
<!--    <select id="findAll" resultType="com.great.entity.User">-->
<!--		select * from user-->
<!--		<where>-->
<!--			<if test="uname != null and uname != ''">-->
<!--				uname like CONCAT('%', #{uname},'%')-->
<!--			</if>-->

<!--			<if test="pwd != null and pwd != ''">-->
<!--				pwd like CONCAT('%', #{pwd},'%')-->
<!--			</if>-->
<!--		</where>-->
<!--		limit #{beg},#{end}-->
<!--	</select>-->


<!--    <select id="findAllFile" resultMap="fileMap">-->
<!--		SELECT f.*,s.name,s.score, u.uname from fiel as f,style as s ,user u where f.styleid = s.id and f.uid = u.uid-->
<!--		limit #{beg},#{end}-->
<!--	</select>-->


<!--    <select id="findCount" resultType="int">-->
<!--		select count(*) from user-->
<!--		<where>-->
<!--			<if test="uname != null and uname != ''">-->
<!--				uname like CONCAT('%', #{uname},'%')-->
<!--			</if>-->

<!--			<if test="pwd != null and pwd != ''">-->
<!--				pwd like CONCAT('%', #{pwd},'%')-->
<!--			</if>-->
<!--		</where>-->
<!--	</select>-->
<!--    <select id="findFileCount" resultType="int">-->
<!--		select count(*) from fiel-->
<!--	</select>-->



<!--	&lt;!&ndash;    <select id="findAllForMap" resultType="java.util.HashMap">&ndash;&gt;-->
<!--&lt;!&ndash;		select deptno, dname, loc from g_dept&ndash;&gt;-->
<!--&lt;!&ndash;	</select>&ndash;&gt;-->

<!--    <insert id="addUser" parameterType="com.great.entity.User">-->
<!--		insert into user(-->
<!--			 uname-->
<!--			,pwd-->
<!--		)values(-->
<!--			 #{uname}-->
<!--			,#{pwd}-->
<!--		)-->
<!--	</insert>-->
<!--    <insert id="reg" parameterType="java.util.HashMap">-->
<!--		insert into user(-->
<!--			 uname-->
<!--			,pwd-->
<!--		)values(-->
<!--			 #{uname}-->
<!--			,#{pwd}-->
<!--		)-->
<!--	</insert>-->
<!--    <insert id="insertMenuByRoleId" parameterType="java.util.HashMap">-->
<!--		insert into role_menu(-->
<!--			 roleid-->
<!--			,menuid-->
<!--		)values(-->
<!--			 #{roleid}-->
<!--			,#{menuid}-->
<!--		)-->
<!--	</insert>-->
<!--    <insert id="insertLog" parameterType="com.great.aoplog.SystemLog">-->
<!--		insert into SystemLog(-->
<!--			 description-->
<!--			,method-->
<!--			,logType-->
<!--			,requestIp-->
<!--			,exceptioncode-->
<!--			,exceptionDetail-->
<!--			,params-->
<!--			,createBy-->
<!--			,createDate-->
<!--		)values(-->
<!--			 #{description}-->
<!--			,#{method}-->
<!--			,#{logType}-->
<!--			,#{requestIp}-->
<!--			,#{exceptioncode}-->
<!--			,#{exceptionDetail}-->
<!--			,#{params}-->
<!--			,#{createBy}-->
<!--			,#{createDate}-->
<!--		)-->

<!--	</insert>-->
<!--    <insert id="uploadFile" parameterType="com.great.entity.File">-->
<!--		insert into fiel(-->
<!--			 filename-->
<!--			,uid-->
<!--			,uploadtime-->
<!--			,styleid-->
<!--			,times-->
<!--		)values(-->
<!--			 #{fileName}-->
<!--			,#{uid}-->
<!--			,#{uploadTime}-->
<!--			,#{styleId}-->
<!--			,#{times}-->
<!--		)-->

<!--	</insert>-->

<!--    <delete id="deleteMenuByRoleid" parameterType="int">-->
<!--        delete from role_menu-->
<!--        where roleid = #{roleid}-->
<!--    </delete>-->

<!--    <update id="updateUser"  parameterType="java.util.HashMap"  >-->
<!--        update user-->
<!--        set  uname = #{uname}-->
<!--            ,pwd = #{pwd}-->
<!--        where uid = #{uid}-->
<!--    </update>-->
</mapper>